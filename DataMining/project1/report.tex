\documentclass[a4paper]{article}

\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage{listings}
\lstset{numbers=right, 
                numberstyle=\tiny, 
                breaklines=true,
                backgroundcolor=\color{white},
                numbersep=5pt,
                xleftmargin=0in,
                xrightmargin=0in} 
\usepackage[section]{placeins} 

\title{Project 1 Report Data Mining}

\author{Priyank Arora 1001553349 \\ Gangadhar Viswanathan 1001535640}

\date{\today}

\begin{document}
\maketitle

\begin{abstract}
The purpose of this project is to study the detailed working of 4 different data classifiers â€“ KNN, Centroid, SVM, and Linear Regression. This report includes detailed accuracy measures of the classifiers used for different Test, Train data sets and K fold cross validations on them. 

The classification program includes the data handler code as well. Upon  execution, the programs ask the user input for the specific task to be implemented (Task A/B/C/D) and outputs accordingly.
The Project is done using \textbf{Python (2.7.12)} using numpy, sys, matplotlib, sklearn libraries.
\end{abstract}

\section{Project Task A}
Use the data-handler to select "A, B, C, D, E" classes from the handwritten-letter data. From this smaller data set, Generate a training and test data: for each class
using the first 30 images for training and the remaining 9 images for the test.
Do classification on the generated data using the four classifiers.
\subsection{Solution}
\begin{itemize}

\item Use \verb letter_2_digit_convert  to get class id of string "ABCDE"  1,2,3,4,5.
\item SplitData2TestTrain returns \verb|[test_Vector, test_Label, train_Vector,| \verb train_Label] for 0-29 as training and 30-38 as test.
\item Accuracy of the Label of \verb test_Vector is predicted using SVM, Centroid, 5\-NN, and Linear regression.
\item Task A outputs the classification accuracy of all the four classifiers.
\end{itemize}
\subsection{Output}
Command: python project1.py A
\begin{figure}
\centering
\includegraphics[width=1\textwidth]{taskA.png}
\caption{\label{fig:data} Task A output: showing the efficiency of accuracy in predicting class labels using classifications.}
\end{figure}
\FloatBarrier
\section{Project Task B}
On ATNT data, run 5-fold cross-validation (CV) using each of the four classifiers: KNN, centroid, Linear Regression and SVM. If you don't know how to partition the data for CV, you can use the data-handler to do that. Report the classification accuracy of each classifier. Remember, each of the 5-fold CV gives one accuracy. You need to present all 5 accuracy numbers for each classifier. Also, the average of these 5 accuracy numbers.


\subsection{Solution}
\begin{itemize}
\item Divide complete date set into 5 sets for 5 fold cross validation. 
\item Use splitData2TestTrain to get these data sets in following order:
\begin{itemize}
\item Fold 1 : Test(0,1) \hfill Train (\{0,1,2,3,4,5,6,7,8,9\} - \{0,1\})
\item Fold 2 : Test(2,3) \hfill Train(\{0,1,2,3,4,5,6,7,8,9\} - \{2,3\})
\item Fold 3 : Test(4,5) \hfill Train(\{0,1,2,3,4,5,6,7,8,9\} - \{4,5\})
\item Fold 4 : Test(6,7) \hfill Train(\{0,1,2,3,4,5,6,7,8,9\} - \{5,7\})
\item Fold 5 : Test(8,9) \hfill Train (\{0,1,2,3,4,5,6,7,8,9\} - \{8,9\})
\end{itemize} 
\item The Accuracy of the Labels of \verb test_Vector is predicted using SVM, Centroid, 5\-NN, and Linear regression for each fold.
\item Output of the accuracy average, with individual accuracy is printed.
\end{itemize}
\subsection{Output}
\label{sec: Project Task B}
Command: python project1.py B
\begin{figure}
\centering
\includegraphics[width=1\textwidth]{taskB.png}
\caption{\label{fig:data}Task B output: showing the average efficiency of accuracy, and for each fold, in predicting class labels using classifications.}
\end{figure}
\FloatBarrier
\section{Project Task C}
On handwritten letter data, fix on 10 classes. Use the data handler to generate training and test data files.    Do this for seven different splits:  (train=5 test=34), (train=10 test=29),  (train=15 test=24) ,(train=20 test=19), (train=25 test=24) , (train=30 test=9) ,  (train=35 test=4). On these seven different cases, run the centroid classifier to compute average test image classification accuracy. Plot these 7 average accuracy on one curve in a figure. What trend can you observe? When do this task, the training data and test data do not need be written into files.
\subsection{Solution:}
\begin{itemize}
\item \verb letter_2_digit_convert returns the class ids for letters 'ABCDEFGHIJ' \(10 Alphabets\).
\item splitData2TestTrain returns the \verb|[test_Vector, test_Label, train_Vector,| \verb train_Label] for following sets:
\begin{itemize}
\item Set 1 : Test(5:38) \hfill Train (0:4)
\item Set 2 : Test(10:38) \hfill Train (0:9)
\item Set 3 : Test(15:38) \hfill Train(0:14)
\item Set 4 : Test(20:38) \hfill  Train(0:19)
\item Set 5 : Test(25:38) \hfill Train (0:24)
\item Set 6 : Test(30:38) \hfill  Train (0:29)
\item Set 7 : Test(35:38) \hfill Train (0:34)
\end{itemize}
\item Accuracy of the Labels of \verb test_Vector is predicted using Centroid method for each set.
\item Output of the individual accuracy of each case is plotted on graph.
\end{itemize}
\subsection{Output:}
Command : python prohject1.py C
\begin{figure}
\centering
\includegraphics[width=1\textwidth]{taskC.png}
\caption{\label{fig:data}Task C output : The graph show the progress in the efficiency as the train instances increase. Highest Accuracy is achieved when dataset size of test and train is equal.}
\end{figure}
\FloatBarrier
\section{Project Task D}
On handwritten letter data, fix on 10 classes. Use the data handler to generate training and test data files.    Do this for seven different splits:  (train=5 test=34), (train=10 test=29),  (train=15 test=24) ,(train=20 test=19), (train=25 test=24) , (train=30 test=9) ,  (train=35 test=4). On these seven different cases, run the centroid classifier to compute average test image classification accuracy. Plot these 7 average accuracy on one curve in a figure. What trend can you observe? When do this task, the training data and test data do not need be written into files.
\subsection{Solution:}
\begin{itemize}
\item \verb letter_2_digit_convert returns the class ids for letters 'KLMNOPQRST' \(10 Alphabets\).
\item splitData2TestTrain returns the \verb|[test_Vector, test_Label, train_Vector,| \verb train_Label] for following sets:
\begin{itemize}
\item Set 1 : Test(5:38) \hfill Train (0:4)
\item Set 2 : Test(10:38) \hfill Train (0:9)
\item Set 3 : Test(15:38) \hfill Train(0:14)
\item Set 4 : Test(20:38) \hfill  Train(0:19)
\item Set 5 : Test(25:38) \hfill Train (0:24)
\item Set 6 : Test(30:38) \hfill  Train (0:29)
\item Set 7 : Test(35:38) \hfill Train (0:34)
\end{itemize}
\item Accuracy of the Labels of \verb test_Vector is predicted using Centroid method for each set.
\item Output of the individual accuracy of each case is plotted on graph.
\end{itemize}
\subsection{Output:}
Command: python prohject1.py D
\begin{figure}
\centering
\includegraphics[width=1\textwidth]{taskD.png}
\caption{\label{fig:data}The graph show the progress in the efficiency as the train instances increase. Highest Accuracy is achieved when dataset size of test and train is equal.}
\end{figure}
\FloatBarrier
\section{ Project Task E}
Write data handlers.
\subsection{pickDataClass(filename,class\_ids)}
This Data handler will help you to "extract a small part of a input data" and generate training data and test data as input to feed into a classifier.
\\Code :
\begin{lstlisting}[language=Python]
def pickDataClass(filename, class_ids):
    data = np.genfromtxt(filename, delimiter=',')
    listOfClassifierColumn = []
    for i in class_ids:
        a = np.where(data[0] == i) 
# returns index locations of the perticular class
        listOfClassifierColumn.extend(np.array(a).tolist()) 
# appending columns into a string 
    listOfClassifierColumn = [item for sublist in listOfClassifierColumn for item in sublist] 
# forming a array    
    np.savetxt(TEMP_FILE_NAME, data[:,listOfClassifierColumn], fmt="%i", delimiter=',')
\end{lstlisting}
\subsection {splitData2TestTrain(filename, number\_per\_class,  test\_instances)}
\textbf{filename}: char\_string specifying the data file to read. This can also be an array containing input data.
\\\textbf{number\_per\_class}: number of data instances in each class (we assume every class has the same number of data instances)
\\\textbf{test\_instances}: the data instances in each class to be used as test data. We assume that the remaining data instances in each class (after the test data instances are taken out) will be training\_instances  
\\\textbf{Return/output}: Training\_attributeVector(trainX), Training\_labels(trainY),  \\ Test\_attributeVectors(testX), Test\_labels(testY)
\begin{lstlisting}[language=Python]
def splitData2TestTrain(filename, number_per_class, test_instances):
    start, end = test_instances.split(":")
    listTest  = list(range(int(start), int(end)+1))
    listTrain = list((set(list(range(0,number_per_class)))-set(listTest)))
    Training = []
    Test = []
    data = np.genfromtxt(filename, delimiter=',')    
    for i in xrange(0, data[0].size, number_per_class):
        templistTest=[x+i for x in listTest]
        templistTrain=[x+i for x in listTrain]
        templistTest.sort()
        templistTrain.sort()
        if len(Test) == 0:
            Test = data[:,templistTest]
        else:
            Test= np.concatenate((Test ,data[:,templistTest]), axis=1)
        if len(Training) == 0:
            Training = data[:,templistTrain]
        else:
            Training= np.concatenate((Training , data[:,templistTrain]), axis=1)
    
    return Test[1:,], Test[0], Training[1:,], Training[0]
\end{lstlisting}
\subsection{store(vector, label, fileName)}
This routine will store (trainX,trainY) into a training data file, and store (testX,testY) into a test data file.
\begin{lstlisting}[language=Python]
def store(trainX, trainY, fileName):
    np.savetxt(fileName, np.vstack((trainY, trainX)), fmt="%i", delimiter=',')
\end{lstlisting}

\subsection{letter\_2\_digit\_convert(str)}
Handler converts a character string to an integer array.
\begin{lstlisting}[language=Python]
def letter_2_digit_convert(mystr):
    mylist = []
    mystr = mystr.upper()
    for i in mystr:
        if i.isalpha():
            mylist.append(ord(i)-64)
    return mylist
\end{lstlisting}
\end{document}